    Esta clase va a ser
        grabad
          a
              Clase 29. DATA SCIENCE
         Data Wrangling II
      Temario
                       28                      29                     30
              Data Wrangling I         Data Wrangling            Workshop: 
                                               II                Limpieza de 
                                                                    datos
                 ‚úì Data Wrangling en    ‚úì Etapas de Data         ‚úì Repaso Data 
                    proyectos DS           Wrangling               Wrangling+ tips 
                                                                   buenas pr√°cticas
                 ‚úì Etapas Data          ‚úì Data Transformation
                    Wrangling                                    ‚úì Recomendaciones 
                                        ‚úì Opciones de remoci√≥n     para Data Wrangling
                 ‚úì Combinar y fusionar     de duplicados
                    objetos con Pandas.                          ‚úì ¬øC√≥mo hacer una 
                                        ‚úì √çndices Jer√°rquicos      revisi√≥n de pares y 
                    Merge y Concat                                 dar feedback?
                                        ‚úì Print, GroupBy, Apply
    Objetivos de la clase
                 Identificar las funciones de manipulaci√≥n de 
                 datos en Pandas
                 Hacer un repaso de algunas de las m√°s 
                 usadas
       MAPA DE CONCEPTOS            Data Wrangling 
                                   en proyecto de DS
                                    Etapas de Data 
                        Parte I      Wrangling
                                    Merge y Concat
     Data Wrangling                   Data 
                                    Transformation
                                    Remoci√≥n de 
                                     duplicados
                        Parte II      √çndices 
                                     jer√°rquicos
                                    Print, GroupBy, 
                                      Apply
    Repaso: Etapas Data 
       Wrangling
       PARA RECORDAR
    Repaso
    ¬øQu√© es el Data Wrangling?
    ¬øQu√© tan importante se puede considerar 
    este proceso en el desarrollo de un 
    proyecto de DS?
          Repaso Data Wrangling
        La manipulaci√≥n de datos es el proceso de 
        limpieza y unificaci√≥n de conjuntos de datos 
        complejos y desordenados para facilitar el 
        acceso,  an√°lisis y modelado. 
        Gran parte del tiempo de un cient√≠fico de datos 
        se ocupa en la manipulaci√≥n de datos.
      Fases iniciales de un 
      proyecto DS
           1                2               3                 4                5
     Definici√≥n de     Contexto         Problema            Data       Exploratory Data 
        objetivo       Comercial       Comercial         Acquisition    Analysis (EDA)
      Fases finales de un 
      proyecto DS
          6               7               8                 9               10
        Data        Selecci√≥n del  Desarrollo del     Validaci√≥n y    Conclusiones
     Wrangling        algoritmo       algoritmo        despliegue
     (Munging)        apropiado
                             ~60% del tiempo de un Data Scientist consiste 
                             en limpiar y manipular datos
    Etapas del Data Wrangling
   Descubrimiento   Limpieza       Validaci√≥n
      1       2       3       4       5      6
          Estructuraci√≥n Enriquecimiento   Publicaci√≥n
    Data Transformation
       Definici√≥n
    Data Transformation
    La transformaci√≥n de datos es el proceso de cambiar 
    el formato, la estructura o los valores de los datos. 
    Muchas organizaciones utilizan almacenes de datos 
    basados en la nube, que pueden escalar los recursos 
    inform√°ticos y de almacenamiento con una latencia 
    medida en segundos o minutos. 
    La escalabilidad de la plataforma en la nube permite a 
    las organizaciones omitir las transformaciones de 
    carga previa para luego transformarlos en el momento 
    de la consulta, un modelo llamado ELT (extraer, 
    cargar, transformar).
       Procesos 
      involucrados
    Procesos involucrados
    Los procesos como la integraci√≥n de datos, la 
    migraci√≥n de datos, el almacenamiento de datos 
    y el Data Munging pueden implicar la 
    transformaci√≥n de datos.
    La transformaci√≥n de datos puede ser 
    constructiva (agregar, copiar y replicar datos), 
    destructiva (eliminar campos y registros), est√©tica 
    (estandarizar valores o nombres) o estructural 
    (renombrar, mover y combinar columnas en una 
    base de datos).
      Beneficios y 
     Desaf√≠os de Data 
     Transformation
    Beneficios
     1. Los datos se transforman para que est√©n mejor 
       organizados. Los datos transformados pueden 
       ser m√°s f√°ciles de usar tanto para humanos 
       como para computadoras.
     2. Los datos correctamente formateados y 
       validados mejoran la calidad de los datos y 
       protegen de problemas, como valores nulos, 
       duplicados inesperados, indexaci√≥n incorrecta y 
       formatos incompatibles.
     3. La transformaci√≥n de datos facilita la 
       compatibilidad entre aplicaciones, sistemas y 
       tipos de datos. Los datos utilizados para 
       m√∫ltiples prop√≥sitos pueden necesitar ser 
       transformados de diferentes maneras.
    Desaf√≠os
     1. La transformaci√≥n de datos puede ser costosa. El 
       costo depende de la infraestructura, el software 
       y las herramientas espec√≠ficas utilizadas para 
       procesar los datos. 
     2. Los procesos de transformaci√≥n de datos pueden 
       consumir muchos recursos. Realizar 
       transformaciones en un almac√©n de datos local 
       despu√©s de la carga, o transformar los datos 
       antes de introducirlos en las aplicaciones, puede 
       crear una carga inform√°tica que ralentiza otras 
       operaciones.
    Desaf√≠os
    3. La falta de experiencia y el descuido pueden 
    presentar problemas durante la transformaci√≥n. 
    Los analistas de datos sin la experiencia 
    adecuada en la materia tienen menos 
    probabilidades de notar errores tipogr√°ficos o 
    datos incorrectos porque est√°n menos 
    familiarizados con el rango de valores exactos y 
    permisibles.
    4. Las empresas pueden realizar 
    transformaciones que no se ajustan a sus 
    necesidades. 
    C√≥mo aplicar Data 
     Transformation
    Extracci√≥n y Parsing
    En el proceso ELT moderno, la adquisici√≥n de datos 
    comienza con la extracci√≥n de informaci√≥n de una 
    fuente de datos, seguida de la copia de los datos en 
    su destino. Las transformaciones iniciales se centran 
    en dar forma al formato y la estructura de los datos 
    para garantizar su compatibilidad tanto con el sistema 
    de destino como con los datos que ya existen. 
    Translaci√≥n y Mapping
     Algunas de las transformaciones de datos m√°s 
     b√°sicas involucran el mapeo y la traducci√≥n de 
     datos. 
     La traducci√≥n convierte datos de formatos usados 
     en un sistema a formatos apropiados para un 
     sistema diferente. Incluso despu√©s del an√°lisis, los 
     datos web pueden llegar en forma de archivos 
     JSON o XML jer√°rquicos, pero deben traducirse en 
     datos de filas y columnas para incluirlos en una 
     base de datos relacional.
    Filtros, agregaci√≥n y 
    Los datos se pueden consolidar filtrando campos, 
    summary
    columnas y registros innecesarios. Los datos 
    omitidos pueden incluir √≠ndices num√©ricos en datos 
    destinados a gr√°ficos y tableros o registros de 
    regiones comerciales que no son de inter√©s en un 
    estudio en particular.
    Los datos tambi√©n se pueden agregar o resumir. 
    por ejemplo, transformando una serie temporal de 
    transacciones de clientes en recuentos de ventas 
    por hora o por d√≠a.
    Enriquecimiento e 
    Los datos de diferentes fuentes se pueden fusionar 
    imputaci√≥n
    para crear informaci√≥n enriquecida y desnormalizada. 
    Las transacciones de un cliente se pueden acumular en 
    un total general y agregarse a una tabla de informaci√≥n 
    del cliente para una referencia m√°s r√°pida o para uso 
    de los sistemas de an√°lisis de clientes. 
    Los valores faltantes se pueden imputar o los datos 
    da√±ados se pueden reemplazar como resultado de este 
    tipo de transformaciones.
    Indexamiento y 
    ordenamiento
    Los datos se pueden transformar para que se ordenen 
    l√≥gicamente o para adaptarse a un esquema de 
    almacenamiento de datos. 
    En los sistemas de gesti√≥n de bases de datos 
    relacionales, por ejemplo, la creaci√≥n de √≠ndices puede 
    mejorar el rendimiento o mejorar la gesti√≥n de las 
    relaciones entre diferentes tablas.
    Anonimizaci√≥n y 
    encriptado
    Los datos que contengan informaci√≥n de identificaci√≥n 
    personal u otra informaci√≥n que pueda comprometer la 
    privacidad o la seguridad deben anonimizarse antes de 
    su propagaci√≥n. 
    El cifrado de datos privados es un requisito en muchas 
    industrias, y los sistemas pueden realizar el cifrado en 
    m√∫ltiples niveles, desde celdas de bases de datos 
    individuales hasta registros o campos completos.
      Opciones de 
      remoci√≥n de 
       duplicados
    Valores Duplicados
    Valores duplicados
     Un valor duplicado es aquel en el que todos los 
     valores de al menos una fila son id√©nticos a todos 
     los valores de otra fila. Una comparaci√≥n de valores 
     duplicados depende de lo que aparece en la celda, 
     no del valor subyacente almacenado en la celda.
     Pueden ser de dos tipos:
      a. Valores duplicados: cuando dos 
        caracter√≠sticas tienen el mismo conjunto de 
        valores
      b. √çndice duplicado: cuando el valor de dos 
        caracter√≠sticas es diferente, pero ocurren en el 
        mismo √≠ndice
     ¬øC√≥mo lidiar con 
        ellos?
    ¬øC√≥mo lidiar con ellos?
      Lo primero que debemos hacer es identificarlos
                                Ì±âÌ†Ω
    ¬øC√≥mo lidiar con ellos?
                          Tambi√©n se pueden borrar por columnas
     Podemos borrar todos los duplicados
                         Ì±âÌ†Ω
    √çndices Jer√°rquicos
    √çndices Jer√°rquicos 
    La indexaci√≥n jer√°rquica es una caracter√≠stica 
    importante de pandas que le permite tener m√∫ltiples 
    (dos o m√°s) niveles de √≠ndice en un eje. 
    De forma algo abstracta, proporciona una forma de 
    que trabaje con datos de dimensiones superiores en 
    una forma de dimensiones inferiores.
       √çndices Jer√°rquicos 
           Ejemplo
           Serie de pandas       Vista de los dos niveles de         Acceso al primer nivel
                                 √≠ndices
       √çndices Jer√°rquicos 
           Ejemplo
           Serie de pandas          Acceso al segundo nivel          Acceso al primer nivel
       √çndices Jer√°rquicos 
            Ejemplo
            Serie de pandas     Haciendo un reshape con unstack
                 ‚òï
               Break
             ¬°10 minutos y 
             volvemos!
      Ejemplo en vivo
   Utilizaremos el notebook llamado Clase 7 - Data 
   Wrangling II - Ejemplo en vivo.ipynb y el archivo 
   train.csv dentro de la carpeta de clase para 
   repasar conceptos asociados de Data Wrangling. 
   Aprenderemos a c√≥mo lidiar con nulos, duplicados, 
   estandarizar valores, rellenar con la mediana, valor 
   por defecto y tomar decisiones respecto a qu√© 
   columnas retener para el an√°lisis.
    Print, GroupBy, Apply 
        y Pivot
         Print
    Print
    La funci√≥n Python print() toma cualquier 
    n√∫mero de par√°metros y los imprime en una 
    l√≠nea de texto. Cada uno de los elementos se 
    convierte a formato de texto, separados por 
    espacios, y hay un √∫nico '\n' al final (el 
    car√°cter de "nueva l√≠nea").
    Por defecto, print() pone un solo '\n' despu√©s 
    de todos los elementos. El par√°metro 
    opcional end= establece una cadena 
    personalizada para que aparezca despu√©s de 
    todos los elementos.
       GroupBy
    GroupBy
                       ‚úî La sentencia GROUP BY identifica una columna 
                         seleccionada para utilizarla para agrupar 
                         resultados. 
                       ‚úî Divide los datos en grupos por los valores de la 
                         columna especificada, y devuelve una fila de 
                         resultados para cada grupo. 
                       ‚úî Se puede utilizar GROUP BY con m√°s de un 
                         nombre de columna.
    GroupBy
     Ejemplo de 
     agrupamiento por la 
     columna key, con la 
     agregaci√≥n suma de la 
     columna data.
    GroupBy
        Dataset        Creamos grouped que un objeto de tipo Groupby
         Ponemos la agregaci√≥n
    GroupBy
        Dataset
                      Hacemos todo en una l√≠nea y usamos dos 
                      columnas
                       Devuelve una serie con dos √≠ndices y la 
                       media para cada combinaci√≥n de √≠ndices
        Apply
    Apply
       Permite a los usuarios pasar una funci√≥n y 
       aplicarla en cada valor de la serie Pandas. 
       Se trata de una gran mejora para la biblioteca 
       de pandas, ya que esta funci√≥n ayuda a 
       segregar los datos de acuerdo con las 
       condiciones requeridas, por lo que se utiliza 
       de manera eficiente en la ciencia de datos y el 
       aprendizaje autom√°tico.
    Apply
       Puede ser una funci√≥n de una librer√≠a espec√≠fica como en este ejemplo y 
               aplica a todo el dataframe esta operaci√≥n.
    Apply
        Puede ser una funci√≥n definida manualmente y luego aplicarla al dataframe
        Pivot
    Pivot
    PIVOT rota una tabla convirtiendo los valores √∫nicos 
    de una columna en m√∫ltiples columnas. 
    A su vez, ejecuta agregaciones donde se requieren 
    en cualquier valor de columna restante que se 
    desee en el resultado final.
   Pivot
   En este caso, vemos como utiliza los valores √∫nicos de la columna B y los 
   transforma en m√∫ltiples columnas. 
    Pivot
     Ahora, vemos como utiliza los valores √∫nicos de la columna B y los 
     transforma en m√∫ltiples columnas 
                                 Se pueden usar varios 
                                 valores
       Pivot
        Podemos rotar una tabla convirtiendo los valores √∫nicos de una columna en m√∫ltiples 
       columnas.
       En el caso de abajo, utilizamos los valores √∫nicos de la columna B y los transformamos 
       en m√∫ltiples columnas                  Index no puede tener valores repetidos. 
                                              Esto da un error porque ‚ÄòA‚Äô tiene valores 
                                              repetidos
     Otras funciones
    .astype
     Permite cambiar el tipo de datos de las columnas de las columnas de un 
     DataFrame
       .value_counts()
   Cuenta cu√°ntos valores √∫nicos hay en cada columna. Es muy √∫til para datos categ√≥ricos
             DataFrame con datos categ√≥ricos          Contando cuantos datos 
                                                      repetidos hay de cada valor 
                                                      √∫nico 
       .sort_index() y sort_values()
              Permite ordenar por √≠ndice o por columna seleccionada
             DataFrame original      Ordenando por √≠ndice       Ordenando por 
                                                                columna
    Melt
    Es una funci√≥n que permite cambiar el formato del dataframe a long
    Se usa para crear un formato espec√≠fico donde se usan columnas identificadoras
    Todas las dem√°s columnas se usan como valores.
     
    Pueden usar la funci√≥n pivot para unmelt the output.
     Investigando empresas 
            productivas
     Investigaremos los consumidores m√°s importantes del 
     √∫ltimo corte de una empresa y la importancia de los 
                duplicados
             Duraci√≥n: 15-20 mins
       ACTIVIDAD EN CLASE
    Investigando 
    empresas productivas
    Utilizaremos el archivo ‚Äòdatos_empresas.csv‚Äô y 
    responderemos las siguientes preguntas:
     1. Investiguemos cu√°les son los mejores clientes en 
       ventas
     2. Qu√© tipos de errores pueden observan en este 
       dataset
     3. Remover las filas duplicadas con base en la 
       columna Nombre
     4. Qu√© problemas observa en este dataset respecto 
       a la estructura en una mayor escala
                                        7
               Desaf√≠o entregable: 
                   Data Wrangling
             Deber√°s entregar el s√©ptimo avance de tu proyecto final. Continuaremos hablando 
             sobre lo trabajado en el desaf√≠o ‚ÄúDescarga de datos desde APIs p√∫blicas‚Äù. 
             Crear√°s un notebook donde se desarrollar√° la limpieza de los datos elegidos para tu 
             proyecto final, deber√°s tener en cuenta t√©cnicas vistas en clase para el tratamiento 
             de valores duplicados, nulos y outliers con su respectiva justificaci√≥n.  
                          Recordemos‚Ä¶
                                              Exploramos diversas APIs
                                             Extrajimos los datos en un 
                                                     dataframe
                                             Realizamos una exploraci√≥n 
                                                       simple
                Clase 27
          Desaf√≠o entregable: 
         Descarga de datos desde              Obtenci√≥n de Insights 
              APIs p√∫blicas                       preliminares
            DESAF√çO 
            ENTREGABLE
       Data Wrangling
       Consigna                                        Formato
         ‚úì Iniciar el proceso de limpieza y             ‚úì Se espera un notebook en 
            exploraci√≥n de datos seg√∫n el                   formato .ipynb. Dicho notebook debe 
            dataset elegido para el proyecto                tener el siguiente nombre: 
            final                                           ‚ÄúData_Wrangling+Apellido.ipynb‚Äù.
       Aspectos a incluir                              Sugerencias
         ‚úì Notebook con c√≥digo y estructura             ‚úì Utilizar las herramientas vistas en el 
            eficiente                                       curso
                                                        ‚úì Manejo de duplicados nulos y an√°lisis 
       Ejemplo                                              exploratorio
         ‚úì Data Wrangling                              Explicaci√≥n del desaf√≠o
                                                        ‚úì ¬°Click aqu√≠!
       CLASE N¬∞29
       Glosario
       Data Transformation: La                       Group By: operaci√≥n que identifica una 
       transformaci√≥n de datos es el proceso de      columna seleccionada para utilizarla para 
       cambiar el formato, la estructura o los       agrupar resultados. 
       valores de los datos. 
                                                     Apply: Permite a los usuarios pasar una 
       Valores duplicados: un valor duplicado        funci√≥n y aplicarla en cada valor de la serie 
       es aquel en el que todos los valores de al    Pandas. 
       menos una fila son id√©nticos a todos los 
       valores de otra fila                          Pivot: rota una tabla convirtiendo los 
                                                     valores √∫nicos de una columna en m√∫ltiples 
       Indexaci√≥n jer√°rquica: La indexaci√≥n          columnas.
       jer√°rquica es una caracter√≠stica 
       importante de pandas que le permite           Melt: Es una funci√≥n que permite cambiar 
       tener m√∫ltiples (dos o m√°s) niveles de        el formato del dataframe a long
       √≠ndice en un eje. 
            ¬°Atenci√≥n!
   La clase que viene realizaremos una revisi√≥n de pares. 
    Se recomienda tener adelantadas las fases de Data 
   Acquisition, Data Wrangling y Exploratory Data Analysis 
   para obtener feedback de compa√±eros y tutores con el 
         fin de mejorar nuestro proyecto.
      ¬øPreguntas?
     ¬øA√∫n quieres conocer 
          m√°s?
     Te recomendamos el 
      siguiente material
         MATERIAL AMPLIADO
     Recursos multimedia
          Porque Data Cleaning es necesario?
           ‚úì Why is ‚ÄúData cleaning‚Äù necessary | Medium | 
             Why DATA CLEANING
          Missingno library
           ‚úì Missing data visualization module for Python | Github | 
             Missingno
      Disponible en nuestro repositorio.
      Opina y valora 
       esta clase
        Muchas 
        gracias.
                   Resumen 
               de la clase hoy
              ‚úì Etapas de Data Wrangling
              ‚úì Data Transformation
              ‚úì Opciones de remoci√≥n de duplicados
              ‚úì √çndices jer√°rquicos
              ‚úì Print, GroupBy, Apply
